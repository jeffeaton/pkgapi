% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/endpoint.R
\name{pkgapi_endpoint}
\alias{pkgapi_endpoint}
\title{Basic endpoint object}
\description{
Create a \code{pkgapi_endpoint} object that collects
  together an HTTP method (e.g., \code{GET}), a path (e.g.,
  \code{/path}) and a target R function.  Unlike plumber
  endpoints, pkgapi endpoints are meant to be used in testing.
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{method}}{HTTP method}

\item{\code{path}}{HTTP path}

\item{\code{target}}{R function used for the endpoint}

\item{\code{validate}}{Logical, indicating if response validation is used}

\item{\code{inputs}}{Input control}

\item{\code{returning}}{An \code{\link{pkgapi_returning}} object
controlling the return type (content type, status code,
serialisation and validation information).}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-new}{\code{pkgapi_endpoint$new()}}
\item \href{#method-run}{\code{pkgapi_endpoint$run()}}
\item \href{#method-plumber}{\code{pkgapi_endpoint$plumber()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-new"></a>}}
\subsection{Method \code{new()}}{
Create an endpoint
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{pkgapi_endpoint$new(method, path, target, ..., returning, validate = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{method}}{The HTTP method to support}

\item{\code{path}}{The server path for the endpoint}

\item{\code{target}}{An R function to run as the endpoint}

\item{\code{returning}}{Information about what the endpoint returns,}

\item{\code{validate}}{Logical, indicating if any validation
(implemented by the \code{validate_response} argument) should be
enabled.  This should be set to \code{FALSE} in production
environments.}

\item{\code{input_query}}{Information on input parameters, using
\code{\link{pkgapi_input_query}}.  The names used must match
the names in \code{target}.}

\item{\code{input_body}}{Information on body, using
\code{\link{pkgapi_input_body_binary}} or
\code{\link{pkgapi_input_body_json}}.  Only a single body
element can be specified.}

\item{\code{validate_response}}{Optional function that throws an error
of the processed body is "invalid".}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-run"></a>}}
\subsection{Method \code{run()}}{
Run the endpoint.  This will produce a
standardised response object that contains \code{status_code},
\code{content_type}, \code{body} (the serialised output as run
through the \code{process} method and returned by plumber) and
\code{data} (the result of running the target function)
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{pkgapi_endpoint$run(...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{...}}{Arguments passed through to the \code{target} function}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-plumber"></a>}}
\subsection{Method \code{plumber()}}{
Helper method for use with plumber - not designed
for end-user use.  This is what gets called by plumber when the
endpoint recieves a request.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{pkgapi_endpoint$plumber(req, res, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{req, res}}{Conventional plumber request/response objects}

\item{\code{...}}{Additional arguments passed through to \code{run}}
}
\if{html}{\out{</div>}}
}
}
}
